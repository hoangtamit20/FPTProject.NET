@using Hotel.Base;

@{
    BaseClass bs = new BaseClass();
    string tenDN = "";
    int? phanQuyen = null;
    string? ten = @Context.Request.Cookies["DangNhap"];
    if (ten != null)
    {
        ten = bs.deCodeHash(ten);
    }
    string roleName = "";
    if (ten != null && ten.Contains(";"))
    {
        tenDN = ten.Split(";")[0];
        try
        {
            phanQuyen = Int32.Parse(ten.Split(";")[1]);
            if (phanQuyen == 99)
                roleName = "Admin";
            else if (phanQuyen == 1)
                roleName = "Quản Lý";
            else if (phanQuyen == 0)
                roleName = "Nhân viên";
            else
                roleName = "Không xác định";
        }
        catch (FormatException ex)
        {
            System.Console.WriteLine(ex.Message);
        }
    }
}



<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/lib/bootstrap-5.0.2-dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">
    <title>Quản Lý Khách Sạn</title>
</head>

<body>


    <div class="container-fluid">
        @RenderBody()
    </div>
@* 
    <nav class="navbar navbar-expand-lg thanhnavbar">
        <div class="sideBar container-fluid">
            <div class="col-6">
                <img src="~/Image/Mercedes-Benz.png" class="ImageHeader m-1" alt="...">
                <a class="navbar-brand align-baseline text-dark" href="~/Home/TrangChu">Mercedes Benz</a>
            </div>
            <div class="collapse navbar-collapse col-6" id="navbarSupportedContent">
                <form class="searchHeader d-flex col-6 ">
                    <input class="searchBar" type="search" placeholder="Search" aria-label="Search">
                    <button class="btnSearchHeader" type="submit"><i class="bi bi-search"></i></button>
                </form>
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item navItemHeader">
                        <a class="bi bi-bell" href="#"></a>
                    </li>
                    <li class="nav-item navItemHeader">
                        <a class="bi bi-suit-heart" href="#"></a>
                    </li>
                    @if (ten != null || !string.IsNullOrEmpty(ten))
                    {
                        <div class="dropdown">
                            <button class="btn border-0 dropdownMenuButtonHeader" id="dropdownMenuButton1 "
                                data-bs-toggle="dropdown" aria-expanded="false">
                                <div class="d-flex">
                                    <img src="~/Image/User.png" class="ImageHeader" alt="...">
                                    <div class="Name-Office">
                                        <span class="Name">@tenDN</span>
                                        <span class="Office">@roleName <i class="bi
                                                            bi-chevron-down"></i></span>
                                    </div>
                                </div>
                            </button>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item text-dark" href="#">Account</a></li>
                                <li><a class="dropdown-item text-dark" href="#">Inbox</a></li>
                                <li><a class="dropdown-item text-dark" href="#">Setting</a></li>
                                <li>
                                    @Html.ActionLink("Đăng xuất", "DangXuat", "TaiKhoan", null, new {@class = "dropdown-item text-dark"})
                                </li>
                            </ul>
                        </div>
                    }
                    else
                    {
                        <li class="nav-item">
                            @Html.ActionLink("Đăng Nhập",actionName:"DangNhap",controllerName:"TaiKhoan", null, new {@class =
                            "nav-link text-dark"})
                        </li>                        
                    }
                </ul>
            </div>
        </div>
    </nav>
    <div class="SidebarContent container-fluid">
        <div class="row">
            @if (!string.IsNullOrEmpty(ten))
            {
                <div class="Sidebar col-2 vh100">
                    <div class="flex-shrink-0 p-1 mt-3">
                        @{
                            if (phanQuyen != null)
                            {
                                if (phanQuyen.Value == 99)
                                {
                                    <partial name="_DatPhongPartial"/>
                                    <partial name="_PhongPartial"/>
                                    <partial name="_KhachHangPartial"/>
                                    <partial name="_NhanVienPartial"/>
                                    <partial name="_DichVuPartial"/>
                                    <partial name="_LuongNVPartial"/>
                                    <partial name="_ThanhToanPartial"/>
                                    <partial name="_ThongKePartial"/>
                                    <partial name="_TaiKhoanPartial"/>
                                }
                                else if (phanQuyen.Value == 1)
                                {
                                    <partial name="_KhachHangPartial"/>
                                    <partial name="_NhanVienPartial"/>
                                    <partial name="_LuongNVPartial"/>
                                    <partial name="_ThanhToanPartial"/>
                                    <partial name="_ThongKePartial"/>
                                }
                                else if (phanQuyen.Value == 0)
                                {
                                    <partial name="_DatPhongPartial"/>
                                    <partial name="_PhongPartial"/>
                                    <partial name="_DichVuPartial"/>
                                    @Html.Partial("_KhachHangPartial")
                                }
                                else
                                {
                                    <ul class="list-unstyled ps-0">
                                        <li>You don't have permision!</li>
                                    </ul>
                                }
                            }
                        }
                    </div>
                </div>
                <div class="ContentMain col-10 ">
                    @RenderBody()
                </div>
            }
            else
            {
                <div class="container">
                    <div class="row">
                        <div class="col-2"></div>
                        <div class="ContentMain col-8">
                            @RenderBody()
                        </div>
                        <div class="col-2"></div>
                    </div>
                </div>
            }
        </div>
    </div> *@
    <script src="~/wwwroot/js/site.js"></script>
    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap-5.0.2-dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/js/site.js" asp-append-version="true"></script>
    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>